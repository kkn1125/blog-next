---
slug: "/react-use-transition/"
date: 2022-06-07 23:51:29 +0000
modified: 2023-09-05 13:17:27 +0000
title: "[REACT] useTransition ì‚¬ìš©"
author: Kimson
categories: [react]
image: /assets/images/post/covers/TIL-react.png
tags: [react, basic, til]
description: "Slow Renderë¥¼ ìœ„í•œ startTransition

ì´ì œ ë§‰ ì…ì‚¬í•˜ê³  `react`ì™€ `next`ë¥¼ ê³µë¶€í•œì§€ 3ì£¼ì§¸ê°€ ë©ë‹ˆë‹¤. ì•„ì§ ë°©ëŒ€í•œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ìµœì í•˜í•œ ê²½í—˜ì€ ì—†ì§€ë§Œ, `hooks`ë¥¼ ììœ ìì¬ë¡œ ë‹¤ë£¨ê¸° ìœ„í•´ ì—¬ëŸ¬ ê°•ì˜ë¥¼ ë³´ë˜ ì¤‘ `useTransition`ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

useTransitionì€ ì™œ ë‚˜ì™”ë‚˜

ëŒ€ê²Œ ì‚¬ëŒë“¤ì€ 0.2ì´ˆì— í™”ë©´ì´ ë°˜ì‘í•˜ì§€ ì•Šìœ¼ë©´ í˜ì´ì§€ê°€ ëŠë¦¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì¦‰ê°ì ì¸ ë³€í™”ë¥¼ ê¸°ëŒ€í•˜ëŠ” ë°˜ë©´ì— í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” ë³€í™”ë¥¼ ì§€ì—°í•´ì•¼ í•  ë•Œë„ ìˆìŠµë‹ˆë‹¤.

`useTransition`ìœ¼ë¡œ ì¸í•´ í•´ê²°ë˜ëŠ” ë¬¸ì œë“¤ì´ ìˆëŠ”ë°, ì˜ˆë¡œëŠ” ë§ì€ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ì¶œë ¥í•œë‹¤ê³  ê°€ì •í•œë‹¤ë©´, ë°ì´í„° í•„í„°ë§ì´ë‚˜ í•„ë“œ ê°’ ì œì–´ë¥¼ í•  ê²½ìš° í™”ë©´ì—ì„œ ìˆ˜ë§ì€ ì¼ë“¤ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤."
featured: true
rating: 4.5
profile: false
published: true
---

# Slow Renderë¥¼ ìœ„í•œ startTransition

ì´ì œ ë§‰ ì…ì‚¬í•˜ê³  `react`ì™€ `next`ë¥¼ ê³µë¶€í•œì§€ 3ì£¼ì§¸ê°€ ë©ë‹ˆë‹¤. ì•„ì§ ë°©ëŒ€í•œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ìµœì í•˜í•œ ê²½í—˜ì€ ì—†ì§€ë§Œ, `hooks`ë¥¼ ììœ ìì¬ë¡œ ë‹¤ë£¨ê¸° ìœ„í•´ ì—¬ëŸ¬ ê°•ì˜ë¥¼ ë³´ë˜ ì¤‘ `useTransition`ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## useTransitionì€ ì™œ ë‚˜ì™”ë‚˜

ëŒ€ê²Œ ì‚¬ëŒë“¤ì€ 0.2ì´ˆì— í™”ë©´ì´ ë°˜ì‘í•˜ì§€ ì•Šìœ¼ë©´ í˜ì´ì§€ê°€ ëŠë¦¬ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì¦‰ê°ì ì¸ ë³€í™”ë¥¼ ê¸°ëŒ€í•˜ëŠ” ë°˜ë©´ì— í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” ë³€í™”ë¥¼ ì§€ì—°í•´ì•¼ í•  ë•Œë„ ìˆìŠµë‹ˆë‹¤.

`useTransition`ìœ¼ë¡œ ì¸í•´ í•´ê²°ë˜ëŠ” ë¬¸ì œë“¤ì´ ìˆëŠ”ë°, ì˜ˆë¡œëŠ” ë§ì€ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ì¶œë ¥í•œë‹¤ê³  ê°€ì •í•œë‹¤ë©´, ë°ì´í„° í•„í„°ë§ì´ë‚˜ í•„ë“œ ê°’ ì œì–´ë¥¼ í•  ê²½ìš° í™”ë©´ì—ì„œ ìˆ˜ë§ì€ ì¼ë“¤ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```jsx showLineNumbers
import React, { useTransition } from "react";

function App() {
  const [isPending, startTransition] = useTransition();
  // ...

  // ê¸´ê¸‰í•œ ì²˜ë¦¬
  getInputValue(something);

  // ë‚´ë¶€ ëª¨ë“  stateë¥¼ transitionìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
  startTransition(() => {
    // ê¸´ê¸‰í•˜ì§€ ì•Šì€ ì²˜ë¦¬
    heavyProcess(query);
  });

  return <div>...</div>;
}

export default App;
```

ì—¬ê¸°ì„œ `state update`ëŠ” `Urgent update`, `Transition update` ë‘ ê°€ì§€ ë²”ì£¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤. `React`ëŠ” ëŒ€ë¶€ë¶„ ì—…ë°ì´íŠ¸ê°€ ê°œë…ì ìœ¼ë¡œ `Transition update` ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ì „ ë²„ì „ê³¼ í˜¸í™˜ì„±ì„ ìœ„í•´ì„œ `Transition`ì€ `opt-in`ì…ë‹ˆë‹¤.

ì—¬ì „íˆ React 18ì€ ì—…ë°ì´íŠ¸ë¥¼ `Ungent` ì²˜ë¦¬í•˜ë©°, ì—…ë°ì´íŠ¸ë¥¼ `startTransition`ìœ¼ë¡œ ë˜í•‘í•´ì„œ í•´ë‹¹ ì—…ë°ì´íŠ¸ë¥¼ `Transition`ìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ„ ë‚´ìš©ì€ `react` ì €ì¥ì†Œì˜ `feature:startTransition`ì˜ ë‚´ìš© ì¼ë¶€ë¥¼ í•´ì„í•œ ê²ƒì´ê³ , ë‹¨ìˆœí•˜ê²Œ ë§í•˜ìë©´ `setTransition`ìœ¼ë¡œ ì–´ë–¤ ë¬´ê±°ìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë˜í•‘í•œë‹¤ë©´, ë‹¨ìˆœí•˜ê³  ê¸´ê¸‰í•˜ê²Œ ì—…ë°ì´íŠ¸ ë˜ì•¼í•  uië¥¼ ë¨¼ì € ë¹ ë¥´ê²Œ ì—…ë°ì´íŠ¸í•˜ê³  ,ì•½ê°„ì˜ ë”œë ˆì´ë¡œ `transition update`ë¥¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

`transition`ì„ ì‚¬ìš©í•´ì„œ ì„±ëŠ¥ê²€ì‚¬ë¥¼ í•´ë³´ë©´ ë²ˆê°ˆì•„ê°€ë©´ì„œ `ui`ë Œë”ë§ê³¼ ì´ë²¤íŠ¸ ì²˜ë¦¬ê°€ ë©ë‹ˆë‹¤. ë§ˆì¹˜ `CPU`ê°€ ì‹œë¶„í•  ìŠ¤ì¼€ì¥´ë§í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ê°ê°ì˜ ì²˜ë¦¬ë¥¼ ì¼ì • ë‹¨ìœ„ë§Œí¼ ë²ˆê°ˆì•„ ì²˜ë¦¬ë©ë‹ˆë‹¤.
ì´í›„ ì´ë²¤íŠ¸ê°€ ëë‚˜ë©´ `transition update`ë¡œ í™”ë©´ì— ìµœì¢… ë Œë”ë§ì„ í•©ë‹ˆë‹¤.

## transition ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ìœ„í•´ rangeBarë¥¼ ì œì–´í•´ì„œ ë§ì€ ì¼ì„ í•˜ê³  í™”ë©´ì— ë§ì€ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ë„ë¡ ì¼ë¶€ëŸ¬ ë¶€í•˜ê°€ ê±¸ë¦¬ëŠ” ëª¨ë¸ì„ ìƒì„±í•©ë‹ˆë‹¤.

rangeBarëŠ” í•œë„ê°€ 10000ì…ë‹ˆë‹¤. ì´ë•Œ 10000ì€ useState ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œ íƒœê·¸ë¥¼ 10000ê°œ ìƒì„±í•´ì„œ í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ rangeBarë¥¼ ì´ë™í•  ë•Œ ì„±ëŠ¥ì„ ì²´í¬í•©ë‹ˆë‹¤.

![ì„±ëŠ¥ ìƒ˜í”Œ - setState](https://user-images.githubusercontent.com/71887242/172615547-09a2114a-349b-4b4f-a9b8-80c0ec1bcfe0.png)

setStateë§Œ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” êµ‰ì¥íˆ ë²„ë²…ê±°ë¦¬ê³  í™”ë©´ì— ë Œë”ë˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ë§ìŠµë‹ˆë‹¤.

![ì„±ëŠ¥ ìƒ˜í”Œ - useCallback](https://user-images.githubusercontent.com/71887242/172615778-68d5d60c-db3a-4f9c-8b74-70b5e8c9d002.png)

useCallbackì„ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” í° ì°¨ì´ë¥¼ ë³´ì´ì§€ëŠ” ëª»í•©ë‹ˆë‹¤.

![ì„±ëŠ¥ ìƒ˜í”Œ - useTransitionì˜ startTransition](https://user-images.githubusercontent.com/71887242/172616260-4ebc668a-02d6-4515-b5f8-b261e6b9fd80.png)

`useTransition`ì„ ì‚¬ìš©í•´ì„œ `startTransition`ë¥¼ ì‚¬ìš©í•˜ë©´ ì¡°ê¸ˆ ë‹¤ë¥¸ í˜•íƒœì˜ ì„±ëŠ¥ê·¸ë˜í”„ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë²¤íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ”ë° ë§¤ìš° ê¸¸ê²Œ ì§€ì—°ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ rangeBarë¥¼ ì¡°ì‘í•´ë³´ë©´ ì´ì „ ìƒ˜í”Œê³¼ ë‹¬ë¦¬ ë²„ë²…ê±°ë¦¼ì€ ì¤„ì—ˆì§€ë§Œ ì—¬ì „íˆ í™”ë©´ì´ ë Œë”ë˜ëŠ”ë° ì§€ì—°ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ `startTransition`ì„ ë°”ë¡œ `import` í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì–´ë–¨ê¹Œ?

ë°”ë¡œ `import` í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©ì— ì°¸ê³ í•œ ë§í¬ë¥¼ ì²¨ë¶€í•´ë’€ìŠµë‹ˆë‹¤. ì´ë¦„ì€ `"Real world example"`ì…ë‹ˆë‹¤.

![ì„±ëŠ¥ ìƒ˜í”Œ - startTransition](https://user-images.githubusercontent.com/71887242/172617675-4becbe76-add9-428a-9048-5962fec027c2.png)

ìœ„ ì´ë¯¸ì§€ëŠ” `startTransition`ì„ ì ìš©í–ˆì„ ë•Œì˜ ì„±ëŠ¥ ë¶„ì„ì…ë‹ˆë‹¤. êµ‰ì¥íˆ ì´˜ì´˜í•œ ë‹¨ìœ„ë¡œ í•¨ìˆ˜ë¥¼ ë²ˆê°ˆì•„ê°€ë©° í˜¸ì¶œí•˜ëŠ” ëª¨ìŠµì´ ë³´ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ `rangeBar`ë¥¼ ì›€ì§ì´ê³ , í…ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê³ , ë‹¤ì‹œ ì›€ì§ì—¬ë³´ë©´ ì´ì „ ìƒ˜í”Œë“¤ê³¼ ë‹¬ë¦¬ ì¡°ê¸ˆ ë¶€ë“œëŸ¬ì›Œ ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ì§ ê¸°ìˆ ì— ëŒ€í•œ ì´í•´ì™€ ì„±ëŠ¥ ìµœì í™”ì— ëŒ€í•´ ì•„ì§ ê±¸ìŒë§ˆë„ ì•„ë‹Œ ê¸°ì–´ë‹¤ë‹ˆëŠ” ìˆ˜ì¤€ì´ë¼ ì •í™•í•˜ì§€ ì•Šì€ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ëŸ° ì €ëŸ° ì´ìœ ë¥¼ ê³„ì†í•´ì„œ ì°¾ê³ ì í•˜ëŠ” ê²ƒì€ ê¸°ì–´ë‹¤ë‹ˆëŠ” ê²ƒì„ ê±¸ìŒë§ˆ ë—„ ìˆ˜ ìˆê²Œ ë„ì™€ì¤„ ì›ë™ë ¥ì´ ë  ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤.

> 22.06.07 ê¸°ì¤€, ìµœê·¼ ì‘ì„±ë˜ëŠ” í¬ìŠ¤íŒ…ì€ ì‹œê°„ ì‚¬ì •ìƒ ë¹ ë¥´ê²Œ ê¸°ë¡í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. ê³„ì†í•´ì„œ ì‰¬ëŠ” ë‚ ì— ì—…ë°ì´íŠ¸ ì˜ˆì •ì´ë‹ˆ ì°¸ê³ ë°”ëë‹ˆë‹¤ ğŸ™‡â€â™‚ï¸

---

ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©

[React::Real world example](https://github.com/reactwg/react-18/discussions/65#)

[React::Github repository](https://github.com/facebook/react/blob/42f15b324f50d0fd98322c21646ac3013e30344a/packages/react-dom/src/server/ReactPartialRendererHooks.js#L269)
