---
slug: "/django-authenticate-abstract-user/"
date:   2022-03-29 15:15:09 +0000
modified: 2023-09-05 13:16:16 +0000
title:  "[DJANGO] User Authentication ì‚¬ìš©í•˜ê¸° 02"
author: Kimson
categories: [ django ]
image: /assets/images/post/covers/TIL-django.png
tags: [ authentication, til ]
description: "Authentication User í™•ì¥
ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í…œí”Œë¦¿ íƒœê·¸ ë“±ì€ ì´ì „ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
ì´ì–´ì„œ `User Authentication`ì„ í™•ì¥í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¸°ë¡í•˜ë ¤í•©ë‹ˆë‹¤. ì°¾ì•„ë³´ë‹ˆ 4ê°€ì§€ì˜ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

1. Proxy model
2. OneToOne ì—°ê²°
3. `AbstractUser` model ì‚¬ìš©
4. AbstractBaseUser model ì‚¬ìš©

ì´ë²ˆì— ë‹¤ë£° ë‚´ìš©ì€ 3ë²ˆ `AbstractUser`ì´ê¸° ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ëŠ” ì¶”í›„ì— ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤."
featured: true
rating: 4.5
profile: false
published: true
---

# Authentication User í™•ì¥

> ì‚¬ìš©ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í…œí”Œë¦¿ íƒœê·¸ ë“±ì€ [ì´ì „ í¬ìŠ¤íŒ…](https://kkn1125.github.io/django-authenticate/)ì„ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

ì´ì–´ì„œ `User Authentication`ì„ í™•ì¥í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¸°ë¡í•˜ë ¤í•©ë‹ˆë‹¤. ì°¾ì•„ë³´ë‹ˆ 4ê°€ì§€ì˜ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

1. Proxy model
2. OneToOne ì—°ê²°
3. `AbstractUser` model ì‚¬ìš©
4. AbstractBaseUser model ì‚¬ìš©

ì´ë²ˆì— ë‹¤ë£° ë‚´ìš©ì€ 3ë²ˆ `AbstractUser`ì´ê¸° ë•Œë¬¸ì— ë‚˜ë¨¸ì§€ëŠ” ì¶”í›„ì— ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ê¸°ë³¸ì ì¸ ì„¤ì •

ì„¤ì •í•  ë¶€ë¶„ì€ `settings.py`ì™€ `models.py`ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ `models.py`ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ëŠ” `User`ì˜ í•„ë“œ ì™¸ì— ì¶”ê°€í•  í•„ë“œë¥¼ ì‘ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ 10ê°œì˜ í•„ë“œê°€ ìˆë‹¤ë©´, `profile`, `gender`, `address`ë¼ëŠ” í•„ë“œ 3ê°œê°€ ì¶”ê°€ëœë‹¤ê³  ê°€ì •í•œë‹¤ë©´ ì´ 13ê°œì˜ í•„ë“œë¥¼ ê°€ì§„ `User`í…Œì´ë¸”ì„ ë§Œë“­ë‹ˆë‹¤.

ì‚¬ìš©ìí™” í•˜ê¸° ìœ„í•´ ìš°ì„  settingsì— ì¸ì¦ ìœ ì € ëª¨ë¸ì„ ì–´ë–¤ ê²ƒì„ ì°¸ì¡°í•˜ë¼ê³  ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

```python
# auth_test/auth_test/settings.py

AUTH_USER_MODEL = 'myapp.MyUser'
```

í˜„ì¬ ì‘ì—… ì¤‘ì¸ í”„ë¡œì íŠ¸ ëª…ê³¼ í´ë˜ìŠ¤ ì´ë¦„ì„ ì˜ˆë¡œë“¤ë©´ `apps.MyUser`ì´ ë©ë‹ˆë‹¤. íŒŒì¼ ëª… ì œì™¸í•˜ê³  íŒŒì¼ ë‚´ì— ìˆëŠ” í´ë˜ìŠ¤ëª…ì´ ë°”ë¡œ ë¶™ìŠµë‹ˆë‹¤. ì–´ì°¨í”¼ íŒŒì¼ëª…ì„ ì‹¤ìˆ˜ë„ ë¶™ì´ë”ë¼ë„ ì˜¤ë¥˜ë¥¼ ë‚´ë©´ì„œ ì•Œë ¤ì¤ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒ `User`í´ë˜ìŠ¤ì— `AbstractUser`ë¥¼ ìƒì†í•©ë‹ˆë‹¤.

```python
# auth_test/apps/models.py

from django.db import models
from django.contrib.auth.models import AbstractUser

# Create your models here.
class MyUser(AbstractUser):
    """
    models.Modelì´ ì•„ë‹Œ AbstractUserì…ë‹ˆë‹¤.
    """
    bio = models.CharField(max_length=300, null=True, blank=True)
```

`admin`ì„ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´ `admin`ì—ì„œë„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì•„ë˜ ì²˜ëŸ¼ ë‚´ìš©ì„ ì‘ì„±í•©ë‹ˆë‹¤.

```python
# auth_test/apps/admin.py

from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from .models import MyUser

admin.site.register(MyUser, UserAdmin)
```

`migrate`í•˜ê¸° ì „ì—ëŠ” `pgAdmin`ì„ í™•ì¸í•  ë•Œ ì•„ë˜ì™€ ê°™ì´ ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤.

![pgAdmin user](/assets/images/post/django/authentication/auth08.png)

## ìˆ˜ì • ê²°ê³¼

íŠ¹ë³„í•œ ë°ì´í„°ê°€ ì—†ê¸°ë„ í•˜ê³ , ì•„ì§ ì»¤ë©˜ë“œë¼ì¸ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ë°©ë²•ì„ ëª°ë¼ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥´ ìƒˆë¡œ ë§Œë“¤ê³  `migrations`ë¥¼ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.

![makemigrations](/assets/images/post/django/authentication/auth09.png)

ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ê³  migrationsí•˜ê³  migrateí•˜ë©´

![migrate](/assets/images/post/django/authentication/auth10.png)

ë­”ê°€ ì£¼ë£¨ë£© ì ìš©í–ˆë‹¤ê³  í•©ë‹ˆë‹¤. `pgAdmin`ì—ì„œ í™•ì¸í•´ë³´ë©´ ì•„ê¹Œ `user`í…Œì´ë¸”ì—ëŠ” `auth_`ê°€ ë¶™ì—ˆëŠ”ë° ì§€ê¸ˆì€ `ì•±ì´ë¦„_í´ë˜ìŠ¤ì´ë¦„`ìœ¼ë¡œ í…Œì´ë¸”ì´ ìƒì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

![pgAdmin user](/assets/images/post/django/authentication/auth11.png)

ì•„ê¹Œ ì¶”ê°€í–ˆë˜ `bio`í•„ë“œê°€ ì˜ ë“¤ì–´ê°”ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ë²•ì„ ì•„ì§ ì¨ë³´ì§€ ëª»í•´ì„œ ë¹„êµëŠ” ëª»í•˜ê² ìŠµë‹ˆë‹¤ë§Œ, í™•ì¥í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ë§¤ìš° ë‹¨ìˆœí•´ì„œ ê°œì¸ì ìœ¼ë¡œëŠ” ì†ì‰½ê²Œ ì ìš©ê°€ëŠ¥í•œ ë°©ë²•ì´ë¼ ìƒê°í•©ë‹ˆë‹¤. ë‹¨, í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° ì „ì— í•˜ë©´ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ `bio`ì™¸ì—ë„ ì—¬ëŸ¬ í•„ë“œë¥¼ ì¶”ê°€í•´ì„œ í”„ë¡œí•„ ì‚¬ì§„ì´ë‚˜ ì£¼ì†Œì§€ ë“±ì„ ì œì–´í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

![pgAdmin user](/assets/images/post/django/authentication/auth12.png)

ìœ„ ì´ë¯¸ì§€ì— ì¶”ê°€ëœ `bio`ëŠ” íšŒì›ê°€ì… í¼ì„ `UserCreationForm`ì„ ìƒì†ë°›ì•„ `LoginForm`ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë”°ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§• í–ˆê¸° ë•Œë¬¸ì— ì§€ì •ëœ ë‚´ìš©ì´ ì—†ì´ ì¶œë ¥ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì•ì„œ ë§í•œ `AbstractUser`ë¡œ `User`í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ë¶€ë¶„ì€ ë‹¤ ë³´ì•˜ìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” `Authentication`ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ëŠ” `Validator`ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê³  í•„ìš”ì— ë”°ë¼ ê¸°ëŠ¥ì„ `í™œì„±`/`ë¹„í™œì„±` ì‹œí‚¤ëŠ” ë‚´ìš©ì„ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.

---

ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©

[Django::Customizing authentication in Django](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#auth-custom-user)

[Yuda110ë‹˜::[Django] Django ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ˆê¸°í™”í•˜ê¸°](https://yuda.dev/216)

[programcreek :: Python django.contrib.auth.forms.AuthenticationForm() Examples](https://www.programcreek.com/python/example/64448/django.contrib.auth.forms.AuthenticationForm)
