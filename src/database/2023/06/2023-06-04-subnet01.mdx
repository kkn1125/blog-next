---
slug: "/subnet01/"
date: 2023-06-04 14:54:15 +0000
modified: 2023-06-04 14:54:15 +0000
title: "[NETWORK] Netmask와 Subnetmask 01"
author: Kimson
categories: [javascript]
image: /images/post/covers/TIL-network.png
tags: [blog, next.js, migration]
description: "서브넷마스크와 서브넷팅

사내 백엔드가 혼자이다 보니 이것저것 알아야 할 부분이 하나 둘이 아닌 걸 많이 느낍니다. 스위치도 제대로 몰랐던 입사 초기때와 달리 어느정도 원하는 구상대로 서버 환경을 구축하고 포트포워딩하거나 ip 액세스를 제어하는 등의 기초적인 설정을 할 수 있을 정도가 되었습니다.

무턱대고 시작한 네트워크 부분이지만 이론을 알고 있느냐, 그건 또 자신이 없습니다. 네트워크를 하나 씩 만져가며 실수도 해보고, 작동하는 흐름상 이렇게 되겠지 하는 감으로 여기까지 쌓아온거라 이론을 알면 좀 더 매끄럽겠다 싶어 이론을 병행해야겠다는 생각을 했습니다.

물론 아무것도 모르고 부딪힌 것은 아니지만 이론을 보면 볼수록 더 많은 것을 알아야겠다는 욕심도 생깁니다."
featured: true
rating: 4.5
profile: false
published: false
---

# 넷마스크와 서브넷마스크

사내 백엔드가 혼자이다 보니 이것저것 알아야 할 부분이 하나 둘이 아닌 걸 많이 느낍니다. 스위치도 제대로 몰랐던 입사 초기때와 달리 어느정도 원하는 구상대로 서버 환경을 구축하고 포트포워딩하거나 ip 액세스를 제어하는 등의 기초적인 설정을 할 수 있을 정도가 되었습니다.

무턱대고 시작한 네트워크 부분이지만 이론을 알고 있느냐, 그건 또 자신이 없습니다. 네트워크를 하나 씩 만져가며 실수도 해보고, 작동하는 흐름상 이렇게 되겠지 하는 감으로 여기까지 쌓아온거라 이론을 알면 좀 더 매끄럽겠다 싶어 이론을 병행해야겠다는 생각을 했습니다.

물론 아무것도 모르고 부딪힌 것은 아니지만 이론을 보면 볼수록 더 많은 것을 알아야겠다는 욕심도 생깁니다.

## IP

IP는 3자리의 수가 4개의 영역으로 이루어진 형태라는 것은 알고 있을 겁니다. 엄밀히 말하자면 3자리가 아닌 0~255까지의 십진수로 이루어져있습니다. 이 수를 이진수로 변환하면 총 8개의 수로 표현이 되는데요, 이를 bit라고 부릅니다. 총 8bit의 이진수는 4개의 영역에 위치합니다. 각 영역을 Octet이라고 부릅니다.

총 32bit의 이진수가 4개의 Octet에 배치되어 있습니다. 여기서 네트워크 주소와 호스트 주소라는 명칭이 있는데 다음의 넷마스크를 보면서 이해를 해봅시다.

IP의 네트워크 주소부분을 1로 AND연산하면 넷마스크를 얻을 수 있습니다. 예를 들기 전에, 간단하게 IP의 클래스에 대해 알아봅시다.

클래느는 총 5개가 있고 A,B,C,D,E로 나뉩니다. A,B,C 클래스에 대해서만 알아도 충분하기 때문에 D,E 클래스의 자세한 이야기는 생략하겠습니다.

| Class | 1 Octet               | 2 Octet               | 3 Octet               | 4 Octet               |
| ----- | --------------------- | --------------------- | --------------------- | --------------------- |
| A     | 0000 0000 ~ 0111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| B     | 1000 0000 ~ 1011 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| C     | 1100 0000 ~ 1101 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| D     | 1110 0000 ~ 1110 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| E     | 1111 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |

십진수로 표현하면 아래와 같습니다.

| Class | 1 Octet   | 2 Octet | 3 Octet | 4 Octet |
| ----- | --------- | ------- | ------- | ------- |
| A     | 0 ~ 127   | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| B     | 128 ~ 191 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| C     | 192 ~ 223 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| D     | 224 ~ 239 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| E     | 240 ~ 255 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |

A클래스는 1 옥텟의 8비트가 네트워크, 나머지 24비트가 호스트로 나뉘어 구성됩니다. B클래스는 2 옥텟까지의 16비트가 네트워크, 나머지 16비트가 호스트로 나뉘어 구성됩니다. C클래스는 3 옥텟까지의 24비트가 네트워크, 나머지 8비트가 호스트로 나뉘어 구성됩니다.

여기서 0과 255의 호스트 주소는 특수한 목적이 있습니다. 0인 호스트 주소는 전체 네트워크에서 작은 네트워크를 식별하기 위해 대표하는 네트워크 주소가 됩니다. 그리고 마지막 호스트 주소인 255는 해당 네트워크의 브로드캐스트 주소를 위해 사용됩니다. 실제 사용되는 호스트 수는 256 ~ 2 개인 셈입니다.

## 넷마스크

넷마스크는 해당 IP의 네트워크 주소 자리의 비트를 1로 AND연산하면 얻을 수 있습니다. 에를들어 192.168.88.231이라는 IP의 네트워크 주소를 알아봅시다. 192로 시작하기 때문에 C클래스라는 것을 알 수 있고, C클래스는 3옥텟까지 네트워크 주소로 구성되어있습니다. 192.168.88.0이 네트워크 주소이고, 네트워크 주소의 모든 비트를 모두 1로 치환하면 255.2550.255.0이라는 넷마스크를 얻을 수 있습니다.

즉, 네트워크 주소의 모든 비트를 1로 치환하면 넷마스크를 얻을 수 있고, 네트워크 주소를 얻기 위해서는 IP주소와 넷마스크를 AND연산하면 네트워크 주소를 얻을 수 있습니다.

## 서브넷

클래스 기반으로 주소를 지정하게된다면 A클래스의 경우 약 1677만대의 호스트를 연결하 수 있습니다. 하지만 실제로 이렇게 많은 호스트를 연결하는 경우는 없기에 IP 주소의 대부분을 차지하는 A클래스와 B클래스는 낭비되는 IP가 많아집니다.

IP 주소를 효율적으로 활용하기 위해 더 작은 네트워크로 분할 하는 서브넷팅이 등장하고, 이렇게 분할된 작은 네트워크를 서브넷이라 부릅니다.

### 서브넷팅

A클래스는 최대 약 1677만대의 컴퓨터를 연결 할 수 있습니다. 이를 서브넷팅 하게되면 약 256개의 서브넷이 생기고 각 서브넷은 약 6만 5천대를 연결 할 수 있습니다.

여기서부터 클래스의 의미가 흐려지기 시작합니다. 클래스만 봐도 내 IP가 어느 클래스에 속하고 네트워크 주소가 어디에서 호스트주소가 어디까지인지 알 수 있지만 서브네팅된 IP주소는 네트워크 부가 서브넷으로 인해 확장되기 때문에 네트워크 부와 호스트 부를 구별하기 위해 서브넷 마스크가 등장합니다.

### 서브넷마스크

서브넷마스크는 IP 주소의 네트워크와 호스트를 구별하기 위해 만들어졌고, IP 주소의 32비트와 동일한 32비트로 구성되어 있습니다. 범위 또한 이진수로 같습니다.

네트워크 부와 호스트 부를 구분하는 방법으로 네트워크 부에 1을, 호스트 부에 0을 부여하는 방식으로 진행됩니다.
