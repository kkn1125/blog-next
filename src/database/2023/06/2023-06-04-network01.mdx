---
slug: "/network01/"
date: 2023-06-04 14:54:15 +0000
modified: 2023-06-04 14:54:15 +0000
title: "[NETWORK] 네트워크 알아보기 01"
author: Kimson
categories: [network]
image: /assets/images/post/covers/TIL-network.png
tags: [network, ip address, subnetmask, til]
description: "네트워크

이전까지 포스팅은 주로 이미 존재하는 기술과 게임 등에 대해 직접 만들어보고 기록하거나, 작업하면서 발생하는 이슈를 처리하는 내용을 기록했었는데요, 이론 또한 놓칠 수 없는 부분이라 포스팅 주제를 점점 이론을 포함하면서 작성할 예정입니다.😊

이번에 다룰 주제는 네트워크입니다. 네트워크는 둘 이상의 컴퓨터와 연결하는 링크의 조합입니다. 서로 다른 장치들이 상호 작용하고 데이터를 주고 받을 수 있게 합니다.

일반적으로 두 가지 형태로 나뉩니다. 첫번째는 로컬 네트워크로, 가정이나 사무실 같은 작은 단위 지역 내에서 사용됩니다. 이 네트워크를 LAN(Local Area Network)라 부르지요. 이더넷(Ethernet) 케이블, Wi-Fi 또는 기타 유, 무선 기술을 사용해서 연결합니다.

두번째는 원격 네트워크(인터넷)입니다. 전 세계적으로 연결된 컴퓨터 네트워크로 전화선, 광케이블, 위성 또는 무선 통신말 등 다양한 통신 매체를 통해 장치들을 연결합니다.

인터넷을 사용하면 이메일이나 웹사이트, 온라인 게임 등과 같은 다양한 서비스를 이용할 수 있습니다."
featured: true
rating: 4.5
profile: false
published: true
---

# 네트워크

이전까지 포스팅은 주로 이미 존재하는 기술과 게임 등에 대해 직접 만들어보고 기록하거나, 작업하면서 발생하는 이슈를 처리하는 내용을 기록했었는데요, 이론 또한 놓칠 수 없는 부분이라 포스팅 주제를 점점 이론을 포함하면서 작성할 예정입니다.😊

이번에 다룰 주제는 네트워크입니다. 네트워크는 둘 이상의 컴퓨터와 연결하는 링크의 조합입니다. 서로 다른 장치들이 상호 작용하고 데이터를 주고 받을 수 있게 합니다.

일반적으로 두 가지 형태로 나뉩니다. 첫번째는 로컬 네트워크로, 가정이나 사무실 같은 작은 단위 지역 내에서 사용됩니다. 이 네트워크를 LAN(Local Area Network)라 부르지요. 이더넷(Ethernet) 케이블, Wi-Fi 또는 기타 유, 무선 기술을 사용해서 연결합니다.

두번째는 원격 네트워크(인터넷)입니다. 전 세계적으로 연결된 컴퓨터 네트워크로 전화선, 광케이블, 위성 또는 무선 통신말 등 다양한 통신 매체를 통해 장치들을 연결합니다.

인터넷을 사용하면 이메일이나 웹사이트, 온라인 게임 등과 같은 다양한 서비스를 이용할 수 있습니다.

## IP Address

IP주소는 [xxx.xxx.xxx.xxx](http://xxx.xxx.xxx.xxx) 형태라는 것을 알고 있습니다. 이 주소는 십진수의 형태이고, 이를 이진수로 변환하게 되면, aaaa aaaa.bbbb bbbb.cccc cccc.dddd dddd 의 형태로 변환됩니다. 이진수는 0과 1로 이루어져있지요. a,b,c,d가 “.”(점)으로 나뉘어 있습니다. 총 4칸으로 1칸을 Octet이라고 합니다.

1Octet에 8개의 이진수가 있고, 이를 bit(비트)라고 합니다. 8비트가 4개의 Octet에 있으니 총 32bit가 됩니다.

즉, 이진수 형태에서 `0000 0000.0000 0000.0000 0000.0000 0000` ~ `1111 1111.1111 1111.1111 1111.1111 1111` 까지 IP를 생성할 수 있고, 익숙한 형태의 십진수로 보자면 0.0.0.0 ~ 255.255.255.255 모습이지요. 우리가 아는 이 IP주소는 IPv4입니다.

생성가능한 IP개수는 256의 4제곱개인 4,294,967,296(약 42억 9천)개가 됩니다. 현대에 들어서는 이 개수조차 모라자 IPv6가 생겼습니다. 물론 주소 고갈문제 뿐만 아니라 보안, 자동 구성, 확장성 등에 대한 문제를 해결하기 위해 생겨났습니다. 이번 포스팅은 네트워크의 기본적인 지식을 기록하기 위함이기 때문에 IPv4와 IPv6에 대한 이야기는 다음 포스팅에서 다루도록 하겠습니다.

## 네트워크 부와 호스트 부

IP의 형태와 8비트씩 총 32비트의 이진수를 십진수로 변환 표기한다는 것을 알았습니다. 그렇다면 조금 더 들어와 네트워크 부와 호스트 부를 알아볼 차례입니다.

예를 들어 192.168.88.231이라는 IP가 있다고 가정하겠습니다.

네트워크 부는 네트워크를 식별하고 라우터가 라우팅할 때 사용되며 IP주소 할당 기관에서 할당합니다. 호스트 부는 호스트를 식별하는데 사용되고, 네트워크 관리자가 할당할 수 있습니다.

이를 자세히 알기 위해 선행되는 IP 주소 클래스를 알아봅시다.

### IP Address Class

IP주소에 클래스로 나뉜다는 것은 아실 수도 있고, 모르실 수도 있습니다. 여기서 간단히 짚고 넘어가고자 합니다. 클래스는 총 5가지로 A, B, C, D, E로 나뉩니다. 우리가 다른 건 몰라도 `A`, `B`, `C`는 알고 가야합니다. 아래 표를 보고 이어가겠습니다.

| Class | 1 Octet               | 2 Octet               | 3 Octet               | 4 Octet               |
| ----- | --------------------- | --------------------- | --------------------- | --------------------- |
| A     | 0000 0000 ~ 0111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| B     | 1000 0000 ~ 1011 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| C     | 1100 0000 ~ 1101 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| D     | 1110 0000 ~ 1110 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |
| E     | 1111 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 | 0000 0000 ~ 1111 1111 |

십진수로 표현하면 아래와 같습니다.

| Class | 1 Octet   | 2 Octet | 3 Octet | 4 Octet |
| ----- | --------- | ------- | ------- | ------- |
| A     | 0 ~ 127   | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| B     | 128 ~ 191 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| C     | 192 ~ 223 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| D     | 224 ~ 239 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |
| E     | 240 ~ 255 | 0 ~ 255 | 0 ~ 255 | 0 ~ 255 |

클래스 기준은 IP 주소 앞에서 8비트 씩 나눈 4개의 Octet을 조합해서 `네트워크 부`와 `호스트 부`를 정한 것입니다.

클래스에 따라서 어디까지가 네트워크 부이고, 호스트 부인지 결정됩니다. 단, **서브넷의 등장 전 까지**의 말입니다.

클래스 A는 IP 주소 32비트 중 앞의 **8비트(1Octet)를 네트워크 부로 두고**, 나머지 **24비트를 호스트 부로 나눈 것**입니다. 네트워크 범위로는 클래스 B는 앞의 16비트를 네트워크 부, 나머지 16비트를 호스트 부로 나눈 것입니다. 클래스 C는 앞의 32비트를 네트워크 부, 나머지 8비트를 호스트부로 나눈 것입니다.

### 서브넷마스크

IP주소의 클래스를 알아보았는데요. 각 클래스별로 기본 서브넷 마스크가 주어집니다. A는 255.0.0.0, B는 255.255.0.0, C는 255.255.255.0이 기본 서브넷 마스크입니다. 앞서 말한 네트워크 부의 이진수를 모두 1로 치환했을 때 얻어지는 값이기도 합니다.

다시 돌아와서 각 클래스 별로 네트워크 부와 호스트 부를 알게 되었습니다. 이 IP 주소 범위에서 한가지 더 알아야할 부분은 특수 목적으로 사용되는 IP 호스트 부를 알아야 합니다. 크게는 `네트워크 주소`와 `브로드캐스트 주소`입니다.

호스트 부의 모든 비트가 0 또는 1인 번호의 IP 주소는 네트워크 주소, 브로드캐스트 주소로 할당되는데요. 즉, 192.168.88.0 이라는 네트워크 부가 있다면, 192.168.88.0과 192.168.88.255는 각각 네트워크 주소와 브로드캐스트 주소가 된다는 말입니다. 이 IP 주소들은 컴퓨터나 라우터가 자신의 IP 주소로 사용할 수 없습니다. 192.168.88.0~192.168.88.255까지의 256개 IP 중 2개를 제외한 254개만 사용 가능하다는 말이기도 하지요.

## 서브넷

서브넷마스크 이야기가 나왔지요. 이제 서브넷팅과 서브넷마스크를 포함해서 알아보려합니다. 앞서 IP를 약 42억 9천개를 생성할 수 있다고 했습니다. 일반 가정 또는 회사에서 과연 42억개를 생성할 일이 있을까요? 클래스 A의 경우 하나의 네트워크 당 약 1,677만 개의 호스트를 연결 할 수 있습니다. 256의 3제곱이 되겠네요.

클래스 B의 경우도 꽤 많은 호스트를 연결 할 수 있지요. 그런데 실제로 연결 가능한 호스트가 많다 해도 모두 사용하는 경우가 없기 때문에 전체 IP주소의 대부분을 차지하는 A, B 클래스에서 낭비가 발생합니다.

IP 주소를 보다 효율적으로 이용하기 위해 작은 네트워크로 분할하는 것을 서브넷팅이라 하고, 분할된 작은 네트워크를 서브넷이라 말하지요.

## 서브넷팅

클래스 A를 예로 네트워크 부의 8비트에 나머지 호스트 24비트에서 서브넷팅하게 되면 확장되어 네트워크 8비트 서브넷 8비트 나머지 호스트 16비트로 변경됩니다.

이렇게 하나의 네트워크에서 256개의 서브넷을 만들고, 각 서브넷에 약 6만 5천개의 호스트를 생성할 수 있습니다.

네트워크가 하나의 묶음이라면 서브넷은 묶음 안에 묶음을 만든 것이라 생각하면 편할 것 같습니다.

서브넷팅하게 되면 네트워크 부가 변경됩니다. 확장이 되어 서브넷까지 네트워크 부가 됩니다. 그렇다면 이전에 봤던 클래스 표를 보면 어디까지가 네트워크 부이고, 호스트 부인지 알 수 없게 됩니다.

예를 들면, 127.63.3.16 IP의 네트워크가 서브넷팅하기 전이라면 127이 네트워크 부입니다. 서브넷팅한 후라면 127.63까지가 확장된 네트워크 부 일 수 있습니다. 즉, 서브넷팅 후 IP는 클래스 표를 보고 판단하기 어렵다는 말입니다.

## 서브넷 마스크

서브넷 마스크는 IP 주소의 네트워크 부와 호스트 부 경계를 구분하기 위해 만든 동일한 포멧의 숫자입니다. IP 주소의 32비트에 대응한 32비트로 구성이 되어 있지요.

네트워크 부는 이진수 1로 구성되고 호스트 부는 이진수 0으로 구성됩니다. 표기할 때는 IP 주소와 동일하게 십진수로 변환하여 표기 되는데요. 212.191.34.25 라는 IP가 있다면 서브넷 마스크를 255.255.255.0으로 표기 하게 됩니다. 간혹 슬래시 뒤에 숫자를 붙인 형태를 봤을 수 있습니다.

```bash {1} showlineNumbers
212.191.34.25 /24
```

prefix(프리픽스) 표기입니다. 슬래시 뒤의 24는 네트워크 부의 비트 수가 24비트라는 의미입니다.

적은 개수의 호스트를 연결하고자 네트워크를 구축을 해야한다는 가정을 합시다. 50개의 호스트가 연결되어야 한다면 가장 적은 호스트를 가지는 클래스 C를 사용해야합니다. 하지만 적다고 해도 256-2개 인 254개를 사용해야하지요. 하지만 50개를 연결하고 난 후 나머지 204개는 낭비가 됩니다.

그렇다면 서브넷팅을 통해 50에 근접한 개수의 호스트를 생성할 수 있는 네트워크로 확장시키면 가능하겠지요.

클래스 C의 호스트부에서 2비트를 당겨와 서브넷팅한다면, 나머지 6비트가 할당할 수 있는 2의 6제곱 인 64-2인 62개로 50개의 호스트 연결이 가능하고, 12개의 호스트가 남게 됩니다.

그렇다면 위의 코드 박스에 있는 IP를 예로 들어, 212.191.34.0 /24 에서 212.191.34.0 /26으로 표기합니다.

위 예시 IP에서 서브넷마스크 /26로 구성한다면 호스트의 범위는 아래와 같습니다.

- 212.191.34.0 ~ 212.191.34.63
- 212.191.34.64 ~ 212.191.34.127
- 212.191.34.128 ~ 212.191.34.191
- 212.191.34.192 ~ 212.191.34.255

서브넷마스크가 /26이므로 네트워크 개수는 4개가 되고, 호스트 수는 64개가 됩니다. 총 256개인 것은 변함이 없어야 합니다. 각 범위의 처음과 끝 호스트는 네트워크 주소와 브로드캐스트 주소로 할당되는 부분은 모든 네트워크에서 동일한 규칙으로 적용되는 점 참고하시면 됩니다.

여기서 계산이 잘 안 될 수 있습니다. 서브넷 마스크가 /24이면 255.255.255.0입니다. /26이면 255.255.255.128입니다. 호스트의 2비트를 빌렸기 때문에 호스트 부의 비트는 6비트로 2의 6제곱인 64가 됩니다. 이 값으로 256을 나누게 되면 네트워크 개수가 되고, 호스트 수는 256에 네트워크 수를 나누면 됩니다.

편하게 /25부터는 네트워크 수가 2의 제곱으로 올라가고, 호스트 수는 256에서 네트워크 개수로 나눠주면 편합니다.

마지막으로 /32 서브넷마스크는 호스트 루트하고 해서 특정 호스트로 가는 경로를 알릴 때 사용합니다.

그렇다면 실제 제가 사용하고 있는 wsl의 IP 주소를 기준으로 예시로 알아보겠습니다.

wsl에 할당된 IP는 192.168.203.191 이고 broadcast는 192.168.207.255입니다. 넷마스크 값은 255.255.240.0 입니다.

넷마스크를 보면 16비트에 4비트를 당겨온 것을 알 수 있습니다. 그리고 110으로 시작하기 때문에 클래스 C에 해당하는 것을 알 수 있습니다.

다시 서브넷마스크 표기를 프리픽스로 해서 작성하면 192.168.203.191 /28이 됩니다. 네트워크의 개수는 16개가 되고, 호스트의 수는 16개가 되겠네요.

서브넷 범위는 다음과 같습니다.

- 192.168.203.0 ~ 192.168.203.15
- 192.168.203.16 ~ 192.168.203.31
- 192.168.203.32 ~ 192.168.203.47
- 192.168.203.48 ~ 192.168.203.63
- ...
- 192.168.203.192 ~ 192.168.203.191 \<\< 여기
- 192.168.203.192 ~ 192.168.203.207
- 192.168.203.208 ~ 192.168.203.223
- 192.168.203.224 ~ 192.168.203.239
- 192.168.203.240 ~ 192.168.203.255

각각 앞 뒤의 호스트는 네트워크와 브로드캐스트에 할당 됩니다.

## 마무리

네트워크에 대해 짧게나마 정리해봤습니다. 자주 봤지만 그러려니하고 지나친 내용들을 더 많이 알게 되고, 왜 내가 생각했던 방법이 안되는 것인지 명확히 알 수 있는 기회가 된 것 같습니다. 왜 외부에서 서버로 접근하는 사람의 내부 IP를 알 수 없을까 라는 생각이 얼마나 말이 안되는지도 점점 알아가면서 다른 접근 방법을 시도하고 생각하게 되는 것 같습니다.

매번 만들거나 에러를 수정하는 기록이 많이 있었기 때문인지 이론에 관한 포스팅을 하려니 정리도 제대로 안되고 무엇보다도 익숙하지가 않습니다. 여기까지 봐주셔서 감사합니다. 피드백이 있으시다면 댓글로 남겨주시기 바랍니다~! 😁